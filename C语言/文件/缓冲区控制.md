#### fflush() - 刷新缓冲区

c

`int fflush(FILE *stream);`

- 立即将缓冲区内容写入文件
    
- fflush(NULL)：刷新所有输出流
    

#### setbuf() 和 setvbuf()

c

`void setbuf(FILE *stream, char *buf);`
`int setvbuf(FILE *stream, char *buf, int mode, size_t size);`

**缓冲区设置示例：**

c

```#include <stdio.h>

int main() {
    FILE *log = fopen("app.log", "a");
    if (!log) return 1;
    
    // 设置行缓冲
    setvbuf(log, NULL, _IOLBF, BUFSIZ);
    
    // 无缓冲的错误输出
    setbuf(stderr, NULL);
    
    fprintf(log, "程序启动\n");
    fprintf(stderr, "错误：找不到配置文件\n");
    
    // 强制刷新日志
    fflush(log);
    
    fclose(log);
    return 0;
}

