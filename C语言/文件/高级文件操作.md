### 1. 临时文件操作

#### tmpfile() - 创建临时文件

c

`FILE *tmpfile(void);`

- 创建二进制读写模式的临时文件
    
- 程序结束自动删除
    

#### tmpnam() - 生成临时文件名

c

`char *tmpnam(char *str);`

- 生成唯一文件名
    
- **注意**：存在安全问题，推荐使用tmpfile()
    

**临时文件使用示例：**

c

```c
#include <stdio.h>
#include <stdlib.h>
void process_with_temp_file() {
    // 创建临时文件
    FILE *temp = tmpfile();
    if (!temp) {
        perror("创建临时文件失败");
        return;
    }
    // 写入临时数据
    for (int i = 0; i < 100; i++) {
        fprintf(temp, "数据 %d\n", i);
    }
    // 回到开头读取
    rewind(temp);
    char buffer[100];
    while (fgets(buffer, sizeof(buffer), temp)) {
        printf("读取: %s", buffer);
    }
    // 文件自动关闭和删除
    fclose(temp);
}
```

### 2. 文件重命名与删除

#### rename() - 重命名文件

c

`int rename(const char *oldname, const char *newname);`

#### remove() - 删除文件

c

`int remove(const char *filename);`

**文件管理示例：**

c
 ```c
 #include <stdio.h>
#include <string.h>

int backup_file(const char *filename) {
char backup_name[256];
// 生成备份文件名
    snprintf(backup_name, sizeof(backup_name), "%s.backup", filename);
        // 如果备份文件已存在，先删除
    if (remove(backup_name) == 0) {
        printf("删除旧备份文件\n");
    }
// 重命名当前文件为备份
    if (rename(filename, backup_name) != 0) {
        perror("备份失败");
        return -1;
    }
    printf("文件 %s 已备份为 %s\n", filename, backup_name);
    return 0;
}
 ```