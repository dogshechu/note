###  文件位置指针函数

#### fseek() - 定位文件位置

c

`int fseek(FILE *stream, long offset, int whence);`

- offset：偏移量（字节）    
- whence：
    - SEEK_SET：文件开头    
    - SEEK_CUR：当前位置 
    - SEEK_END：文件末尾    

#### ftell() - 获取当前位置

c

`long ftell(FILE *stream);`

-返回当前位置（字节偏移量）
    

#### rewind() - 回到文件开头

c

`void rewind(FILE *stream);`

- 等价于 fseek(stream, 0L, SEEK_SET);
    

#### fgetpos() 和 fsetpos() - 高级定位

c

`int fgetpos(FILE *stream, fpos_t *pos);`
`int fsetpos(FILE *stream, const fpos_t *pos);`

- 处理大于2GB的文件
    
- fpos_t可以存储大文件位置
    

**随机访问示例：**

c

```c
#include <stdio.h>

void reverse_file(const char *filename) {
    FILE *fp = fopen(filename, "rb+");  // 读写二进制
    if (!fp) return;
    
    // 获取文件大小
    fseek(fp, 0, SEEK_END);
    long size = ftell(fp);
    
    // 逐字节反转文件
    for (long i = 0; i < size / 2; i++) {
        fseek(fp, i, SEEK_SET);
        char c1 = fgetc(fp);
        
        fseek(fp, size - 1 - i, SEEK_SET);
        char c2 = fgetc(fp);
        
        // 交换
        fseek(fp, i, SEEK_SET);
        fputc(c2, fp);
        
        fseek(fp, size - 1 - i, SEEK_SET);
        fputc(c1, fp);
    }
    
    fclose(fp);
}’‘’