### 1. fopen() - 打开文件

c

`FILE *fopen(const char *filename, const char *mode);`

**mode参数详解：**

|模式|含义|文件存在|文件不存在|起始位置|
|---|---|---|---|---|
|"r"|只读文本|打开成功|打开失败|文件开头|
|"w"|只写文本|清空内容|创建新文件|文件开头|
|"a"|追加文本|打开成功|创建新文件|文件末尾|
|"r+"|读写文本|打开成功|打开失败|文件开头|
|"w+"|读写文本|清空内容|创建新文件|文件开头|
|"a+"|读写文本|打开成功|创建新文件|文件末尾|
|"rb"|只读二进制|打开成功|打开失败|文件开头|
|"wb"|只写二进制|清空内容|创建新文件|文件开头|

**重要注意事项：**

- 二进制模式需要在模式字符串中添加'b'，如"rb"、"wb+"
    
- Windows和Linux的换行符处理不同（\r\n vs \n）
    

**错误处理示例：**

c

`#include <stdio.h>`
`#include <stdlib.h>`
`int main() {`
    `FILE *fp;`
    `char filename[] = "data.txt";`
    `fp = fopen(filename, "r");`
    `if (fp == NULL) {`
        `// 多种错误处理方式`
        `printf("无法打开文件 %s\n", filename);`
        `perror("错误信息");  // 自动添加错误描述`
        `fprintf(stderr, "错误：无法打开文件 %s\n", filename);`
        `exit(EXIT_FAILURE);`
    `}`
    `// 文件操作...`
    `fclose(fp);`
    `return 0;`
`}`

### 2. fclose() - 关闭文件

c

`int fclose(FILE *stream);`

- 刷新缓冲区：确保所有缓冲数据写入磁盘
    
- 释放资源：释放FILE结构和缓冲区内存
    
- 更新文件系统信息